<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>PYCUT TUTORIAL</title>
  <link href="css/prism.css" rel="stylesheet">
  <link href="css/pycut.css" rel="stylesheet">
  <link href="css/simpletree.css" rel="stylesheet">
  <script type="text/javascript" src="js/prism.js">
 </script>
</head>

<body>
<!-- ----------------------------------------------------------------------------------------------------------->
<!-- ----------------------------------------------------------------------------------------------------------->
<!-- ----------------------------------------------------------------------------------------------------------->
<!-- ----------------------------------------------------------------------------------------------------------->

<div class="sidenav">
<h3 class="title_sidenav">Contents</h3>
<ul class="tree">
  <li><a href="#P-01">Introduction</a> 
    <ul>
      <li><a href="#P-01-01">Inkscape SVG files</a></li>
    </ul>
  </li>
  <li><a href="#P-02">Basic example</a> 
    <ul>
      <li><a href="#P-02-01">Importing a SVG file</a></li>
      <li><a href="#P-02-02">Creating a PyCut Job</a></li>
      <li><a href="#P-02-03">Creating CAM operations</a></li>
      <li><a href="#P-02-04">Create the GCode</a></li>
    </ul>
  </li>
  <li><a href="#P-03">GUI Components</a> 
    <ul>
      <li><a href="#P-03-01">Svg Settings</a></li>
      <li><a href="#P-03-02">Tool (shared by all Operations)</a></li>
      <li><a href="#P-03-03">Tabs</a></li>
      <li><a href="#P-03-04">Material</a></li>
      <li><a href="#P-03-05">Curve to Line Conversion</a></li>
      <li><a href="#P-03-06">GCode Conversion</a></li>
      <li><a href="#P-03-07">GCode Generation</a></li>
    </ul>
  </li>
</ul>
<script type="text/javascript">
var tree = document.querySelectorAll('ul.tree a:not(:last-child)');
for (var i = 0; i < tree.length; i++){
    tree[i].addEventListener('click', function(e) {
        var parent = e.target.parentElement;
        var classList = parent.classList;
        if (classList.contains("open")) {
            classList.remove('open');
            var opensubs = parent.querySelectorAll(':scope .open');
            for (var i = 0; i < opensubs.length; i++) {
                opensubs[i].classList.remove('open');
            }
        } else {
            classList.add('open');
        }
        if (classList.contains("open")) {
            //e.preventDefault(); // on open -> jump (default)
          
        } else {
            e.preventDefault(); // on close
        }
    });
}</script>
</div>
<!-- ----------------------------------------------------------------------------------------------------------->
<!-- ----------------------------------------------------------------------------------------------------------->
<!-- ----------------------------------------------------------------------------------------------------------->
<!-- ----------------------------------------------------------------------------------------------------------->

<div class="main">
<h1 class="etitle">PyCut Tutorial</h1>

<h2 id="P-01">Introduction</h2>

<p>Welcome to <strong>PyCut</strong>, a clone of <strong>jsCut</strong>, the
excellent (at least for beginners) CAM, web-based programm, that takes as input
<strong>SVG</strong> files and generates G-Code. So why this rewrite ?</p>

<p><strong>PyCut</strong> aims to offer all the (minimalistics) features found
in jsCut, with some small improvements. Hopefully you will find
<strong>PyCut</strong> usefull when learning CNC and producing your first GCode
files.</p>

<p>Starting point of <strong>PyCut</strong> are <strong>SVG</strong> files,
your designs. In the following, we will use <strong>Inkscape</strong> to
produce <strong>SVG</strong> files, and will shortly point out what has to be
taken into consideration when creating "usable" <strong>SVG</strong> files.</p>

<h3>SVG</h3>

<h4>Shapes</h4>

<p>The SVG standard is large, and <strong>PyCut</strong> cannot simply read a
svg file, display it, and allow the user to define cnc operations on the
"shapes" defined inside the svg file. Of course, the goal of
<strong>PyCut</strong> is to process as many svg data as possible.</p>

<p>The shapes inside a svg file are the following:</p>
<ul>
  <li>&lt;path&gt;</li>
  <li>&lt;rect&gt;</li>
  <li>&lt;circle&gt;</li>
  <li>&lt;ellipse&gt;</li>
  <li>&lt;polygon&gt;</li>
  <li>&lt;line&gt;</li>
  <li>&lt;polyline&gt;</li>
</ul>

<p>Moreover, the user will also want to process the strings written in the svg
file:</p>
<ul>
  <li>&lt;text&gt;</li>
</ul>

<p>Because <strong>PyCut</strong> finally processes "paths" in order to
calculate cnc paths, these shapes have to be interpreted/converted first to svg
&lt;path&gt; items.</p>

<p>The first possibility is to convert all the shapes and text (strings) found
in your data into &lt;path&gt; shapes, and then import this &lt;path&gt; only
svg file into <strong>PyCut</strong>. This conversion can be done within
Inkscape. However it is not very practical as you ends managing 2 svg datas,
the first one containing your initial shapes (circle, rect etc) and the
converted one.</p>

<p>The second possibility is to not convert your svg data at all. Indeed,
<strong>PyCut</strong> can read the shapes by itself, so every thing will be
Ok. It is nevertheless only true if there are no &lt;text&gt; items in the svg
data, as <strong>PyCut</strong> cannot (yet) convert &lt;text&gt; items into
paths and wil thus ingnore them. </p>

<p>So how to handle &lt;text&gt; items ? <strong><span style="color:#8000ff">IN
PROGRESS</span>:</strong> Well actually <strong>PyCut</strong> comes with it
own &lt;text&gt; to &lt;path&gt; converter as a small utility, so just use it
and copy/paste the result of a &lt;text&gt; conversion into your svg. A
successfull conversion will only occurs if the &lt;text&gt; item is simple
enough: the text "value" should not be splitted into several &lt;tspan&gt;
items with different fonts. No &lt;tspan&gt; tag at all is also possible (and
simpler). </p>

<p>All in all, if <strong>PyCut</strong> were to display text strings at the
wrong positions, the user can always export the svg from Inkscape (and write
<strong>PyCut</strong> a ticket).</p>

<p>Can <strong>PyCut</strong> handle svg datas where shapes/paths are defined
with "svg transform" operations? Well, not yet, but please read further. There
is for this problem a solution...</p>

<h2>Svg Documents</h2>

<p>Svg datas can be written with basic editors (vi, emacs etc..) or with real
applications, as Inkscape. In both case, the svg datas should contains (and
<strong>Inkscape</strong> does it automatically) a <strong>viewBox</strong>,
and the svg attributes <strong>width</strong> and <strong>height.</strong>
These 2 important attributes shoul be given with a unit, i.e
"<strong>mm</strong>" or "<strong>in</strong>".</p>

<h4>Shapes "id"</h4>

<p>In order to reference the shapes or paths, the shapes / paths must have
their own <strong>"id"</strong>, hopefully unique inside the svg document.</p>

<p>If the user has edited the svg "per hand", then he should not forget to give
all shapes an unique id. If the user has created the svg with
<strong>Inkscape</strong>, then "id"s are automatically given, but maybe the
user will want to edit them and give them meaningfull name.</p>

<h4>Transformations</h4>

<p>It is usual to translate, rotate, scale and skew the shapes, especially when
using &lt;defs&gt; items together with &lt;use&gt;.</p>

<p>Unfortunately, <strong>PyCut</strong> cannot handle these transformations
"out of the box". Nevertheless, if the user is using such transformations
inside his svg data, it is then possible to "resolve" them, as
<strong>PyCut</strong> also comes with a small utility just to resolve any
possible transformation while keeping the<strong>"id"</strong>s right.
<strong><span style="color:#8000ff">IN PROGRESS</span></strong>: This utility
should be integrated into <strong>PyCut</strong> so that the user can spare
this step. Actually, this utility is found in the source code under the folder
"<strong>utilities/svgresolver</strong>".</p>

<h3>Inkscape</h3>

<p>With Inkscape, the first step is to specify the "Document size". Please
choose as units "mm" or "in". This will be used later when creating GCode with
the option "Zero Lower Left of Material" as reference. This option needs the Y
size of the material.</p>

<h2>Svg File Editing with a Text Editor</h2>

<p>Sometimes it is easier to edit a svg without a graphical app like Inkscape, but simply with a text editor.</p>
<p>This way, it is easy for example to define shapes in the <strong>&lt;def&gt;</strong> paragraph 
and reuse theses shapes in the main body of the svg file with the help of the <strong>&lt;use&gt;</strong>
tag and some transformations.
</p>

<p>PyCut will not be able to read such a svg file, but PyCut includes an utility called svgrevolver.py 
which resolves all the items with their transformations.</p>

<!-- ----------------------------------------------------------------------------------------------------------->
<!-- ----------------------------------------------------------------------------------------------------------->
<!-- ----------------------------------------------------------------------------------------------------------->
<!-- ----------------------------------------------------------------------------------------------------------->

<h2 id="P-02">Basic example</h2>

<h3>Importing a SVG file</h3>

<p>So import your svg into <strong>PyCut</strong>: The SVG content should be
displayed in the central area. </p>

<div class="info">
<p><strong>Note:</strong> text is not displayed inside the
<strong>PyCut</strong> svg viewer. It has to be converted as &lt;path&gt; in
order to be further processed.</p>
</div>

<h3>Creating a PyCut Job</h3>

<p>Then create a new "job" : this is a kind of setting file that stores for a
given svg file all the CAM operations that the users has created, together with
all others settings relevant when generating g-code.
It can be created, saved and loaded again and modified - quite practical.</p>

<h3>Creating CAM operations</h3>

<p>Once an empty job is created and a svg file loaded, it is time to create some CAM operations:
select 1 or more items in SVG window (they should turn beige) and click the
button "Create Operation": a new operation in the operation table should
appear.</p>

<p>Define the properties of the operation: the main one is the CAM operation
type: "Pocket", "Engrave", "Inside" or "Outside". The others options wil be
discussed later. Default values at this point should be Ok.</p>

<h3>Create the GCode</h3>

<p>Select one or more CAM operations in the operations table: the "geometry" of
the operation(s) should turn black in the SVG viewer: this is (are) the
region(s) of the material that wil be affected when cutting the material.</p>

<p>Then finish creating the G-Code by pressing one button "g code" in the
operation table: the tool path(s) should appears in green in the black
regions.</p>

<p>The produced G-Code can be inspected in the "G code viewer" and the "G code
Simulator" display areas.</p>

<p>You just have to save the G-Code and you're done. The gcode file should be named
as the CAM operation name.</p>

<!-- ----------------------------------------------------------------------------------------------------------->
<!-- ----------------------------------------------------------------------------------------------------------->

<h2>GUI Components</h2>

<h3>Svg Settings</h3>

<div>
<img src="pycut_svgsettings.png" width="310"> </div>

<h4>user units scale</h4>

<p>What is this? And why is it disabled and set to 1? Let's take an example: in
Inkscape, the user would set the document's size to <strong>100x40 mm</strong>,
supposedly the size of the material to work on. Inkscape automatically sets the
<strong>user units scale </strong><strong>to 1</strong>. Note that the user
units are not "px" or whatever. This means, <strong>1 "user unit" is equal to 1
mm (and the viewbox is "0 0 100 40" while width="100mm" and
height="40mm")</strong></p>

<div>
<img src="Inkscape_settings_mm.png" width="563"> </div>

<p>Of course when editing the svg (in Inkscape or in a text editor),
<strong>the user is only concerned with the user units</strong> : he draws a
rectangle of size 20x30 at the location 10x10. The users may simply even not be
aware of this fact. When choosing mm, conversion from <strong>user
units</strong> to <strong>mm</strong> is absolutely straightforward as, as
said, the user units scale is 1 per default .</p>

<p>Let's consider now the case where the user switches to
<strong>inches</strong> for the document size. The size of the document becomes
then <strong>3,93701x1,57480 inches</strong> (yes, 100 / 25.4 is 3.93701). Note
that Inkscape automatically change the <strong>user units scale to
25.4</strong>. Because of this, the <strong>view box remains at "0 0 100
40"</strong>. That way, a rectangle filling the full document size is still
100x40.</p>

<div>
<img src="Inkscape_settings_in.png" width="563"> </div>

<p>Filling a box half the size of the document is 50x20, right, but what are
real dimension of that box ? The user would have to steadily calculate from
fancy user units (ex: 50x20) in inches</p>

<p>But why would a user use inches and work with user units scale factor 25.4
(leading infact to work in mm) ? The user can set the user units scale factor
to 1. The effect of this is that now, in order to fill the whole document with
a rectangle, the rectangle has to be of the size user unit size of
3.93701x1.57480. </p>

<p>Of course the size of the material is certainly not 3.93701x1.57480 inches,
but something like 5x3 inches: an human readable size. The user knows that he
has to draw a rectangle inside the material of size let say 1.5x1.2 inches. And
these dimensions are the ones that are effectively saved in the svg document.
So the user units are exactly the same as the "physical units" when choosing a
scale of 1.</p>

<p>Now how can <strong>PyCut</strong> handles these settings?
<strong>PyCut</strong> only works with the <strong>user units</strong>.
<strong>PyCut</strong> will calculate toolpaths in the same order of magnitude
of the user units values of the svg. If you choose "<strong>mm</strong>" for
the gcode output, you would have set your svg document size in
"<strong>mm</strong>", and the <strong>user unit scale to 1</strong>. Because
of this, the gcode X,Y and Z values are the same as the one of the paths
values.</p>

<p>If you choose "<strong>in</strong>" for the gcode output, then certainly you
have set your svg document size in "<strong>in</strong>", and the <strong>with
user unit scale equals to 1</strong>,no conversion is either needed.</p>

<p>Note that this scale factor is not explicitely given in the svg file. It is
calculated from the ratio viewbox / width. It is eventually the task of the
user to know what is the user units scale value, and, theorically, to set it in
<strong>PyCut</strong>. But my opinion is, working with a user unit scal of 1
is preferably.</p>

<p><strong><span style="color:#0000ff">I personnaly stick to svg document units
in "mm" with user units scale factor of 1, and output my gcode in mm. No
confusion! </span></strong></p>

<div class="warning">
<p><strong>Warning</strong>: The user could use "mm", and set a scale factor of
10 or whatever, but it certainly makes no sense.</p>
</div>

<p><strong style="color:#0000ff">I apologize for the ones who would like to
work with user units scale not equals to 1.</strong> </p>

<p>The further <strong>Gcode Units</strong> setting is not only a flag to set
the code <strong>G20</strong> (inches) or <strong>G21</strong> (mm) inside the
gcode file: it also allows the proper conversion of the tool diameter physical
size (inch or mm) in user units.</p>

<p>The rule is:</p>
<ul>
  <li><strong>Gcode Units</strong> in "mm": tool diameter is transformed to mm
    - the same as the user units</li>
  <li><strong>Gcode Units</strong> in "in": tool diameter is transformed to
    inch - the same as the user units</li>
</ul>

<div class="warning">
<p><strong>Warning</strong>: <strong>PyCut</strong> assumes that for
"<strong>mm</strong>" or "<strong>in</strong>", the <strong>user unit scale
factor is always 1</strong> .</p>
</div>

<p></p>

<h3>Tool</h3>

<div>
<img src="pycut_tool.png" width="310"> </div>

<h3>Tabs</h3>

<p>It's easy to define tabs with <strong>PyCut</strong>: just click the button
"Create Tab" and a red circle is created in the svg viewer, of radius 5 and
position (10,10). The user can drag 'n drop it fron the svg viewer, or set its
size/postion in the tab table. Yes tabs, for simplicity, are circle. To be
effective, the tabs have to be enabled and of course placed somewhere on the
generated toolpaths. The height of the tab is shared by all tabs.</p>

<div>
<img src="pycut_tabs.png" width="310"> </div>

<p></p>

<div class="warning">
<p><strong>Warning</strong>: Tabs shall not overlap with other tabs (at least
the enabled ones).</p>
</div>

<p>You can check the Gcode generation in the viewer/simulator if everythings is
Ok. </p>

<h3>Material</h3>

<p>The Operations "Cut Depth" should not be larger than the material thickness.
</p>

<div>
<img src="pycut_material.png" width="310"> </div>

<p></p>

<div class="warning">
<p><strong>Warning</strong>: Actually no check is performed.</p>
</div>

<h3>Curve to Line Conversion</h3>

<p>If your design contain curves (svg "arcs" or "bezier" curves), they have to
be discretized in small segments.</p>

<p>The 2 following parameters allow to specified how fine the curve
discretization will be</p>
<ul>
  <li>Minimun number of segments</li>
  <li>Segment lenght</li>
</ul>

<h3>GCode Conversion</h3>

<p>The starting location of a milling operation is given by the initial
location in the GCode. Per default, PyCut gives as starting point the (0,0)
coordinates of the SVG file, which is located at the top-left of the material.
The SVG conventions are opposite to GCode convention considering the Y
direction.</p>

<p>So the GCode generation will have to invert the direction of the Y axis
coordinates. But still the reference is the top-left postion.</p>

<p>It is possible to change the reference location of the generated GCode</p>
<ul>
  <li>Top-Left location of the material</li>
  <li>Bottom-Left location of the material</li>
  <li>Bottom-Left location of the Gcode area</li>
  <li>Center of the Gcode area</li>
</ul>

<div>
<img src="pycut_gcode_conversion.png" width="310"> </div>

<p>Note that these 4 buttons act as radio buttons.</p>

<p>These four references points set the XOffset and YOffset of the GCode
calculation. After a GCode generation, it is still possible to modify the
XOffset and YOffset to fit at best how to user wants to have the origin be
located with the help of the 2 spin boxes. </p>

<p>And further:</p>
<ul>
  <li>Flip X/Y </li>
</ul>

<p>In the generated G Code, X and Y are switched.This can be helpfull, for
example in the case your <strong>CNC</strong> is the "<strong>1419</strong>"
model (mine!) which is not as large as deep. So this option allows to carve
something like 16x10 cm without to -painfully- rotate all items in the source
svg.</p>

<p></p>

<p>In case of Bottom-Left location of the material, the Y size of the material
is extracted form the svg file: the svg "height" attribute (with units) </p>

<h3>GCode Generation</h3>

<p>Some useful options can be set up:</p>
<ul>
  <li>Return at initial location at end of the Job</li>
  <li>Spindle Start/Stop (<strong>M3</strong>/<strong>M5</strong> codes)</li>
  <li><strong>M2</strong> code</li>
</ul>

<div>
<img src="pycut_gcode_generation.png" width="310"> </div>
<!-- ----------------------------------------------------------------------------------------------------------->
<!-- ----------------------------------------------------------------------------------------------------------->


</body>
</html>
